{% extends "base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto p-4">
    <!-- Filters -->
    <div class="bg-white rounded p-4 mb-6">
        <form method="GET" class="flex gap-4">
            <select name="date" class="border rounded px-2 py-1">
                <option value="">All Days</option>
                {% for date in dates %}
                    <option value="{{ date|date:'Y-m-d' }}" {% if date|date:'Y-m-d' == selected_date %}selected{% endif %}>
                        {{ date|date:"l, F j" }}
                    </option>
                {% endfor %}
            </select>
            
            <select name="room" class="border rounded px-2 py-1">
                <option value="">All Rooms</option>
                {% for room in rooms %}
                    <option value="{{ room }}" {% if room == selected_room %}selected{% endif %}>
                        {{ room }}
                    </option>
                {% endfor %}
            </select>

            <button type="submit" class="bg-blue-500 text-white px-4 py-1 rounded">Filter</button>
        </form>
    </div>

    <!-- Talks -->
    <div class="space-y-4">
        {% for talk in talks %}
            <div class="bg-white p-4 rounded">
                <a href="{% url 'talk_detail' talk.pk %}" class="font-bold text-lg hover:text-blue-600">{{ talk.title }}</a>
                <p class="text-gray-600">{{ talk.speaker_name }}</p>
                <div class="text-sm text-gray-500 mt-2">
                    {{ talk.date_time|date:"g:i A" }} - {{ talk.room }}
                </div>
                <div class="mt-3 space-x-4">
                    <a href="{{ talk.pretalx_link }}" class="text-blue-500 hover:underline">Details</a>
                    {% if talk.video_link %}
                        <a href="{{ talk.video_link }}" class="text-blue-500 hover:underline">Video</a>
                    {% endif %}
                </div>
            </div>
        {% empty %}
            <div class="bg-white p-4 rounded text-center text-gray-500">
                No talks found
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
