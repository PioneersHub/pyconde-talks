{# This template is returned when a question is successfully created via HTMX #}
<div class="alert-success">
  <script>
    // Mark that we've submitted a question and clear the stored content
    sessionStorage.setItem('question_submitted', 'true');
    sessionStorage.removeItem('question_content');
    // Reset the form so user can submit another question immediately
    try { document.getElementById('question-form')?.reset(); } catch (e) {}
  </script>
  <!-- Auto-refresh the question list -->
  <div hx-get="{% url 'talk_questions' question.talk.id %}"
       hx-vals='{"status_filter":"{{ status_filter }}"}'
       hx-trigger="load"
       hx-target="#question-list"
       hx-swap="outerHTML"
       aria-hidden="true"
       class="hidden"></div>
  <p class="text-brand-green">
    {% load i18n %}
    {% if user_can_moderate %}
      {% translate "Your question has been posted and is now visible." %}
    {% else %}
      {% translate "Your question has been submitted successfully and is now awaiting approval." %}
    {% endif %}
  </p>
  {% if not user_can_moderate %}
    <p class="text-sm text-brand-green mt-2">
      {% translate "Once approved by a moderator, your question will appear in the list and others can vote on it." %}
    </p>
  {% endif %}
</div>
